<!DOCTYPE html>
<html>
<head>
	<!-- Encoding -->
	<meta charset="utf-8"/>

	<!-- Webpage meta -->
	<title>FromSoft Image Macro Creator</title>
	<meta name="description" content=
		"Create convincing image macros and text overlays based on FromSoftware games like Dark Souls, Bloodborne and Elden Ring.
		Includes 'VICTORY ACHIEVED', 'YOU DIED', 'NOUN VERBED', 'Area Name' etc.">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href=../favicon.ico type="image/x-icon"/>

	<!-- Garamond font, care of Adobe. -->
	<link rel="stylesheet" href="https://use.typekit.net/lke6kpb.css">

	<!-- Adobe's system for loading Japanese fonts... for lack of an API that I could bother looking into. -->
	<script>
		(function(d) {
		var config = { kitId: 'rdo0gmf', scriptTimeout: 3000, async: true },
		h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
		})(document)
	</script>

	<!-- Google fonts: "Spectral" -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Spectral:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
	
	<!-- Google Analytics to track traffic -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-HCGGJHJ3DR"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		disable = document.cookie?.split(';').find(c=>c.startsWith('ga-disable'))?.endsWith('1') ?? false
		window['ga-disable-G-HCGGJHJ3DR'] = disable
		function gtag(){ dataLayer.push(arguments) }
		gtag('js', new Date()); gtag('config', 'G-HCGGJHJ3DR')
	</script>

	<!-- My stylesheets and scripts -->
	<link rel="stylesheet" href="../normal.css">
	<link rel="stylesheet" href="../soulsy-input.css">
	<link rel="stylesheet" href="../new-area.css">
	<script type="text/javascript" src="image-gen.js"></script>
	
	<!-- Specific page-setup script -->
	<script type="text/javascript">

		document.addEventListener('DOMContentLoaded', function() {
			// Recall whether that box is checked
			document.querySelector('input[target=disable-ga]').checked = window['ga-disable-G-HCGGJHJ3DR']

			// Instantiate the global MacroGenerator
			macroGen = new MacroGenerator(document.getElementById('main-content'))
		})

		window.addEventListener('load', function() {
			// Create the global MacroGenerator
			macroGen.redrawMacro()

			if( browserIs.firefox ) {
				for( const e of document.getElementsByClassName('firefox-warning'))
					e.hidden = false
			}
		})
		
	</script>

	<!-- Twitter Card info -->
	<meta name=twitter:card     content=summary_large_image>
	<meta name=twitter:site     content=@rezuaq>
	<meta name=twitter:creator  content=@rezuaq>
	<meta name=twitter:title    content="FromSoft Image Macro Creator">
	<meta name=twitter:description content="Create convincing looking image macros based on FromSoft games.">
	<meta name=twitter:image    content=https://i.imgur.com/5G0zd3M.png> <!-- TEMP IMAGE? -->
		
</head>

<body style="background-image: url(https://i.imgur.com/Fcq8N5o.jpg)">
<div id=background-layer class="background-layer faded"></div>

<div id=main>
	<div id=main-content class=content style="position: relative; margin-top: 1%; margin-bottom: 100px; margin-left: 2%; width: 96%; max-width: none; overflow: hidden">
		
		<div class=canvas-pane>
			<h1>FromSoftware image macro creator</h1>

			<div class=help>
				Select, link or paste an image to put convincing FromSoftware game overlays on it.
			</div>
			<div class='help firefox-warning' style=color:#ff8e8e hidden>
				Warning: On Firefox certain HTML canvas effects and filters don't work as intended.
				It is recommended to turn off hardware acceleration, or to open this page in a chromium browser instead.
			</div>
			<br>

			<div class=canvas-wrapper>
				<canvas id=canvas class=big width=1920px height=1080px style="margin: auto"></canvas>
			</div>
			
			<div style="text-align:center">
				<div class=info>
					Canvas resolution: <span id="canv-res-x"></span> × <span id="canv-res-y"></span>px
				</div>
				
				<div class=save-buttons>
					<button class=soulsy-box onclick=macroGen.redrawMacro()>Render changes</button>
					<button style=margin-left:20px class=soulsy-box onclick=macroGen.saveImage()>Save image</button>
				</div>
			</div>
		</div>

		<div id=sliders-pane class=sliders-pane>			

			<div id=sliders-tabs class=tabs>
				<label class='tab checked'>
					<input type=radio name=tabs value=all checked>
					<div class="icon icon-all"></div>
				</label>
				<label class=tab> 
					<input type=radio name=tabs value=global-sliders>
					<div class="icon icon-selects"></div>
				</label>
				<label class=tab> 
					<input type=radio name=tabs value=macro-sliders>
					<div class="icon icon-sliders"></div>
				</label>
				<label class=tab> 
					<input type=radio name=tabs value=background-stuff>
					<div class="icon icon-background"></div>
				</label>
			</div>

			<div id=global-sliders class=sliders-container style="margin-bottom:1em">
				<h3> Configuration </h3>

				<div>
					<span class=input-title style=min-width:100px>Macro type:</span>
					<select name=macro-type style=min-width:200px></select>
				</div>
				<div>
					<span class=input-title style=min-width:100px>Game:</span>
					<select name=macro-type-game style=min-width:200px></select>
				</div>
				<div>
					<span class=input-title style=min-width:100px>Preset:</span>
					<div name=macro-type-preset-holder style=display:inline-block></div>
				</div>

				<div>
					<span class=input-title style=min-width:100px>Caption:</span>
					<input type=text id=image-caption value="Enter Caption" style="min-width:280px">
				</div>
			</div>

			<div id=macro-sliders style=width:400px;margin-bottom:1em>
				<h3> Overlay options </h3>

				<div name=position class=sliders-container hidden>
					<h4> Position </h4>
					<div>
						<span class=input-title>Horizontal:</span>
						<button class=reset-button></button>
						<input type=range name=xOffset min=-0.60 max=.60 step=0.001 default=0>
					</div>
					<div>
						<span class=input-title>Vertical:</span>
						<button class=reset-button></button>
						<input type=range name=yOffset min=-0.60 max=.60 step=0.001 default=0>
					</div>
					<div>
						<span class=input-title>Scale:</span>
						<button class=reset-button></button>
						<input type=range name=scale min=-3 max=4 step=.01 default=0 as=log2>
					</div>
				</div>

				<div name=font class=sliders-container hidden>
					<h4 > Text </h4>
					<div class=smol>
						<span class=input-title>Font family:</span>
						<button class=reset-button></button>
						<input type=text name=fontFamily>
					</div>
					<div class=smol>
						<span class=input-title>Color:</span>
						<button class=reset-button></button>
						<input type=color name=textColor>
					</div>
					<div class=smol>
						<span class=input-title>Size:</span>
						<button class=reset-button></button>
						<input type=range name=fontSize min=10 max=400 step=1>
					</div>
					<div class=smol>
						<span class=input-title>Weight:</span>
						<button class=reset-button></button>
						<input type=range name=fontWeight min=100 max=900 step=100>
					</div>
					<div class=smol>
						<span class=input-title>Vertical scale:</span>
						<button class=reset-button></button>
						<input type=range name=vScale min=-2 max=2 step=.02 as=log1.5>
					</div>
					<div class=smol>
						<span class=input-title>Spacing:</span>
						<button class=reset-button></button>
						<input type=range name=charSpacing min=-10 max=40 step=1>
					</div>
				</div>

				<div name=outline class=sliders-container hidden>
					<div class=smol>
						<span class=input-title>Line width:</span>
						<button class=reset-button></button>
						<input name=lineWidth type=range min=0 max=60>
					</div>
					<div class=smol>
						<span class=input-title>Line color:</span>
						<button class=reset-button></button>
						<input name=lineColor type=color as=string>
					</div>
				</div>

				<div name=zoomBlur class=sliders-container hidden>
					<h4> Effect </h4>
					<div class=smol>
						<span class=input-title>Text opacity:</span>
						<button class=reset-button></button>
						<input name=textOpacity type=range min=0 max=1 step=.01>
					</div>
					<div class=smol>
						<span class=input-title>Sheen color:</span>
						<button class=reset-button></button>
						<input name=blurTint type=color default=#ffb299>
					</div>
					<div class=smol>
						<span class=input-title>Sheen size:</span>
						<button class=reset-button></button>
						<input name=blurSize type=range min=1 max=2 step=.01 default=1.1>
					</div>
					<div class=smol>
						<span class=input-title>Sheen opacity:</span>
						<button class=reset-button></button>
						<input name=blurOpacity type=range min=0 max=1 step=.01 default=.08>
					</div>
				</div>

				<div name=sekiro class=sliders-container hidden>
					<h4> Characters </h4>
					<div class=smol>
						<span class=input-title>Characters:</span>
						<button class=reset-button></button>
						<input type=text name=symbol value=死>
					</div>
					<div class=smol style="min-height:49px">
						<span class=input-title>Size:</span>
						<button class=reset-button></button>
						<input type=range name=symbolSize min=50 max=500 step=2>
					</div>
					<div class=smol>
						<span class=input-title>Position:</span>
						<button class=reset-button></button>
						<input type=range name=symbolPos min=-250 max=250 step=2>
					</div>
					<div class=smol>
						<span class=input-title>Spacing:</span>
						<button class=reset-button></button>
						<input type=range name=symbolSpace min=-100 max=100 step=1>
					</div>
				</div>

				<div name=glowy class=sliders-container hidden>
					<h4> Effect </h4>
					<div class=smol>
						<span class=input-title>Text opacity:</span>
						<button class=reset-button></button>
						<input type=range name=textOpacity min=0 max=1 step=.02 default=.7>
					</div>
					<div class=smol>
						<span class=input-title>Glow color:</span>
						<button class=reset-button></button>
						<input type=color name=glowColor as=rgb default=#ffffff>
					</div>
					<div class=smol>
						<span class=input-title>Glow size:</span>
						<button class=reset-button></button>
						<input type=range name=glowSize min=0 max=100 step=1 default=40>
					</div>
					<div class=smol>
						<span class=input-title>Glow opacity:</span>
						<button class=reset-button></button>
						<input type=range name=glowOpacity min=0 max=5 step=.1 default=1>
					</div>
				</div>

				<div name=area class=sliders-container hidden>
					<h4> Decoration </h4>
					<div class=smol>
						<span class=input-title>Underline:</span>
						<button class=reset-button></button>
						<input type=range name=underline min=0 max=.64 step=.01 default=.32>
					</div>
					<div class=smol>
						<span class=input-title>Contrast:</span>
						<button class=reset-button></button>
						<input type=range name=contrast min=0 max=3 step=0.1 default=1>
					</div>
				</div>

				<div name=backImage class=sliders-container hidden>
					<h4> Decoration </h4>
					<div>
						<span class=input-title>Opacity:</span>
						<button class=reset-button></button>
						<input name=opacity type=range min=0 max=1 step=.01>
					</div>
				</div>

				<div name=shadow class=sliders-container hidden>
					<h4> Shadow </h4>
					<div class=smol>
						<span class=input-title>Size:</span>
						<button class=reset-button></button>
						<input name=shadowSize type=range min=0 max=8 step=.02>
					</div>
					<div class=smol>
						<span class=input-title>Opacity:</span>
						<button class=reset-button></button>
						<input name=shadowOpacity type=range min=0 max=1 step=.01>
					</div>
					<div class=smol>
						<span class=input-title>Offset:</span>
						<button class=reset-button></button>
						<input name=shadowOffset type=range min=-0.2 max=0.2 step=.002>
					</div>
					<div class=smol>
						<span class=input-title>Softness:</span>
						<button class=reset-button></button>
						<input name=shadowSoftness type=range min=0 max=2 step=.01>
					</div>
				</div>

			</div>

			<div id=background-stuff>
				<h3> Background </h3>

				<div id=background-image class=sliders-container>
					<div>
						<span class=input-title style=min-width:100px>Image URL:</span>
						<input type=text name=image-URL style="min-width:280px">
					</div>
					<div>
						<span class=input-title style=min-width:100px>Image Upload:</span>
						<input type=file name=image-upload accept="image/*" style=display:inline;width:280px>
					</div>
					<div>
						<label class=input-title>Constrain resolution: <input type=checkbox id=limit-resolution checked></label> 
						<span class=help style="margin-left:1em">(Decreases strain on your system)</span>
						<div id=resolution-warning hidden>Warning: Selected image is too large, auto re-rendering is disabled.</div>
					</div>
				</div>
	
				<div id=background-color class=sliders-container>
					<div class=smol>
						<span class=input-title>Color:</span>
						<input type=color name=bgColor default=#cccccc>
					</div>
					<div class=smol>
						<span class=input-title>Opacity:</span>
						<input type=range name=bgColorOpacity min=0 max=1 step=.01 default=0>
					</div>
				</div>
				
				<div id=image class=sliders-container hidden>
					<h4> Background image filters </h4>
					<div>
						<span class=input-title>Saturation:</span>
						<button class=reset-button></button>
						<input type=range name=imgSaturate min=0 max=200 step=1 default=100>
					</div>
					<div>
						<span class=input-title>Contrast:</span>
						<button class=reset-button></button>
						<input type=range name=imgContrast min=0 max=200 step=1 default=100>
					</div>
					<div>
						<span class=input-title>Brightness:</span>
						<button class=reset-button></button>
						<input type=range name=imgBrightness min=0 max=200 step=1 default=100>
					</div>
				</div>
			</div>

		</div>
		
	</div>
</div>


<div id=footer class=never-fixed>
	<div id=bottom-fade></div>

	<div id=credits>
		<div class="credit left" style=line-height:1em>
			<label>Disable Google Analytics: <input type=checkbox target=disable-ga onclick="document.cookie = 'ga-disable='+ +this.checked"></label>
			<br>
			<span style="opacity: 0.8; font-size: 16px">
				Image composition happens in-app; No data is ever sent to a server, all images are 100% private.
			</span>
		</div>

		<div class="credit right">
			<a href="http://twitter.com/rezuaq" target=_blank>Created by Rezuaq</a>
			<span class=dash>-</span>
			<a href="https://github.com/Sibert-Aerts/sibert-aerts.github.io/tree/master/new-area" target=_blank>On Github</a>
			<span class=dash>-</span>
			<a href="http://imgur.com/a/xrxes" target=_blank>Background images</a>
		</div>
	</div>
</div>

<!-- Element used to trigger/trick the Adobe Fonts script into loading more parts of the font. -->
<div id=adobe-font-trick style=font-family:hot-gfkaishokk hidden>死忍殺不死斬り鬼仏見出冥助あり竜咳快復拝涙</div>

</body>

</html>